<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SAAP | Premium Student Hub</title>
    
    <link rel="icon" type="image/jpeg" href="logo.jpg">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #047857; 
            --secondary: #022c22; 
            --accent: #fecb2f; 
            --bg-light: #f3f4f6; 
            --card-bg: #ffffff;
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --danger: #ef4444;
            --success: #10b981;
            --border-light: #e5e7eb;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
            --shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* STRICT DASHBOARD LOCK */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background-color: var(--bg-light); color: var(--text-main); display: flex; height: 100vh; overflow: hidden; -webkit-font-smoothing: antialiased; }
        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes pageFadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .sidebar-logo { width: 85px; height: 85px; border-radius: 50%; object-fit: contain; border: none; padding: 0; margin-bottom: 15px; background: transparent; }

        /* SIDEBAR */
        .sidebar { width: 280px; background: linear-gradient(180deg, var(--secondary) 0%, #011812 100%); color: white; display: flex; flex-direction: column; transition: 0.4s; box-shadow: 4px 0 20px rgba(0,0,0,0.15); z-index: 20; }
        .sidebar-header { padding: 35px 20px 25px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .sidebar-header h3 { font-size: 1.1rem; line-height: 1.4; font-weight: 800; letter-spacing: 0.5px; color: #fff; margin-bottom: 8px;}
        .sidebar-header p { font-size: 0.75rem; color: var(--accent); font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        
        .sidebar-menu { list-style: none; padding: 25px 0; flex-grow: 1; }
        .sidebar-menu li { padding: 16px 30px; cursor: pointer; transition: all 0.3s ease; border-left: 4px solid transparent; display: flex; align-items: center; gap: 15px; font-weight: 500; color: #9ca3af; font-size: 0.95rem;}
        .sidebar-menu li i { font-size: 1.1rem; transition: 0.3s; width: 20px; text-align: center;}
        .sidebar-menu li:hover { color: white; background: rgba(255,255,255,0.05); }
        .sidebar-menu li.active { background: linear-gradient(90deg, rgba(254, 203, 47, 0.15) 0%, transparent 100%); border-left-color: var(--accent); color: white; }
        .sidebar-menu li.active i { color: var(--accent); }

        /* TOP NAV */
        .main-content { flex-grow: 1; display: flex; flex-direction: column; overflow-y: auto; position: relative; scroll-behavior: smooth; }
        .top-nav { background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(12px); padding: 15px 40px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; box-shadow: var(--shadow-sm); }
        .top-nav h2 { font-size: 1.4rem; font-weight: 800; color: var(--text-main); letter-spacing: -0.5px;}
        .nav-right { display: flex; align-items: center; gap: 25px; }

        .profile-container { position: relative; }
        .user-profile { display: flex; align-items: center; gap: 12px; cursor: pointer; padding: 6px 12px; border-radius: 50px; border: 1px solid var(--border-light); background: white; transition: 0.3s;}
        .user-profile:hover { border-color: var(--primary); }
        .user-profile span { font-weight: 700; font-size: 0.95rem; color: var(--text-main); display: flex; align-items: center; gap: 8px;}
        .avatar { width: 34px; height: 34px; background: var(--primary); color: white; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-weight: 800; font-size: 0.95rem; }
        
        .dropdown-menu { position: absolute; top: 115%; right: 0; background: white; width: 240px; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); opacity: 0; visibility: hidden; transform: translateY(-10px); transition: 0.3s; border: 1px solid var(--border-light); overflow: hidden;}
        .dropdown-menu.active { opacity: 1; visibility: visible; transform: translateY(0); }
        .dropdown-header { padding: 20px; background: #f8fafc; border-bottom: 1px solid var(--border-light); text-align: center; }
        .dropdown-header h4 { margin: 0 0 5px 0; font-size: 1.05rem; color: var(--text-main); font-weight: 800;}
        .dropdown-header p { margin: 0; font-size: 0.8rem; color: var(--text-muted); font-weight: 500;}
        .dropdown-links { list-style: none; padding: 10px 0; margin: 0; }
        .dropdown-links li a { display: flex; align-items: center; gap: 12px; padding: 12px 20px; color: var(--text-main); text-decoration: none; font-size: 0.9rem; font-weight: 600; transition: 0.2s; }
        .dropdown-links li a:hover { background: #f0fdf4; color: var(--primary); padding-left: 25px; }
        .dropdown-links .sign-out { color: var(--danger); border-top: 1px solid var(--border-light); margin-top: 5px; padding-top: 15px; }
        .dropdown-links .sign-out:hover { background: #fef2f2; color: var(--danger); padding-left: 25px;}

        /* DASHBOARD CONTENT */
        .dashboard-container { padding: 40px; max-width: 1400px; margin: 0 auto; width: 100%; transition: 0.3s;}
        
        .welcome-banner { background: linear-gradient(135deg, var(--secondary) 0%, var(--primary) 100%); color: white; padding: 40px; border-radius: 20px; margin-bottom: 30px; box-shadow: 0 10px 20px rgba(4, 120, 87, 0.2); display: flex; justify-content: space-between; align-items: center; animation: pageFadeIn 0.5s ease;}
        .welcome-banner h2 { font-size: 2.2rem; font-weight: 800; margin-bottom: 8px; color: white;}
        .welcome-banner p { font-size: 1.1rem; color: #d1fae5; font-weight: 500; }
        .id-badge { text-align: right; background: rgba(255,255,255,0.1); padding: 15px 25px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.2); }
        .id-badge p { font-size: 0.8rem; text-transform: uppercase; color: var(--accent); margin-bottom: 5px; font-weight: 800; }
        .id-badge h3 { font-size: 1.6rem; letter-spacing: 2px; font-family: monospace; }

        .quick-stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; animation: pageFadeIn 0.6s ease;}
        .stat-card { background: white; padding: 25px; border-radius: 16px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); display: flex; align-items: center; gap: 20px; border: 1px solid var(--border-light); transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s;}
        .stat-card:hover { transform: translateY(-5px); box-shadow: var(--shadow-hover); border-color: #d1d5db; }
        .stat-icon { width: 55px; height: 55px; border-radius: 14px; display: flex; justify-content: center; align-items: center; font-size: 1.6rem; }
        .stat-info p { font-size: 0.85rem; color: var(--text-muted); font-weight: 700; text-transform: uppercase; margin-bottom: 5px; }
        .stat-info h3 { font-size: 1.6rem; font-weight: 800; color: var(--text-main); display: flex; align-items: baseline; gap: 8px; }
        .stat-info h3 span { font-size: 0.8rem; font-weight: 700; padding: 3px 8px; border-radius: 20px; }

        .grid { display: grid; grid-template-columns: 1.7fr 1.3fr; gap: 30px; padding-bottom: 50px; animation: pageFadeIn 0.7s ease;}
        .card { background: white; border-radius: 20px; padding: 30px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); border: 1px solid var(--border-light); margin-bottom: 30px;}
        .card-header { border-bottom: 2px solid var(--bg-light); padding-bottom: 15px; margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center; }
        .card-header h3 { color: var(--text-main); font-size: 1.25rem; font-weight: 800; display: flex; align-items: center; gap: 12px; }
        .card-header h3 i { color: var(--primary); background: #ecfdf5; padding: 10px; border-radius: 10px; font-size: 1.1rem; }

        .action-btn { background: var(--primary); color: white; border: none; padding: 8px 16px; border-radius: 8px; font-size: 0.9rem; font-weight: 700; cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 8px; box-shadow: var(--shadow-sm);}
        .action-btn:hover { background: var(--secondary); transform: translateY(-2px); box-shadow: var(--shadow-md); }

        /* --- LIVE STATUS TRACKER STYLES --- */
        .timeline { display: flex; flex-direction: column; gap: 25px; position: relative; padding-left: 10px; margin-top: 15px;}
        .timeline::before { content: ''; position: absolute; left: 16px; top: 5px; bottom: 5px; width: 2px; background: var(--border-light); z-index: 1;}
        .timeline-item { position: relative; z-index: 2; display: flex; gap: 20px; align-items: flex-start;}
        .timeline-icon { width: 14px; height: 14px; border-radius: 50%; background: var(--border-light); margin-top: 4px; box-shadow: 0 0 0 4px white; transition: 0.3s;}
        .timeline-item.completed .timeline-icon { background: var(--success); box-shadow: 0 0 0 4px #ecfdf5;}
        .timeline-item.active .timeline-icon { background: var(--accent); box-shadow: 0 0 0 4px #fef3c7; animation: pulse-small 2s infinite;}
        .timeline-content h4 { font-size: 0.95rem; font-weight: 800; color: var(--text-main); margin-bottom: 4px; line-height: 1.2;}
        .timeline-content p { font-size: 0.85rem; color: var(--text-muted); font-weight: 500; margin: 0; line-height: 1.4;}
        .timeline-date { font-size: 0.75rem; font-weight: 800; color: #9ca3af; margin-top: 5px; display: inline-block; text-transform: uppercase; letter-spacing: 0.5px;}
        @keyframes pulse-small { 0% { box-shadow: 0 0 0 0 rgba(254, 203, 47, 0.5); } 70% { box-shadow: 0 0 0 10px rgba(254, 203, 47, 0); } 100% { box-shadow: 0 0 0 0 rgba(254, 203, 47, 0); } }

        /* TIMETABLE */
        .schedule-controls select { padding: 8px 16px; border-radius: 8px; border: 1px solid var(--border-light); font-weight: 700; font-family: 'Inter'; outline: none; cursor: pointer; background: var(--bg-light); color: var(--text-main); }
        table { width: 100%; border-collapse: separate; border-spacing: 0 10px; margin-top: -10px;}
        th { padding: 0 15px 5px 15px; text-align: left; color: var(--text-muted); font-weight: 700; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 1px; border-bottom: 1px solid var(--border-light); }
        td { padding: 18px 15px; background: white; font-size: 0.95rem; border-top: 1px solid var(--border-light); border-bottom: 1px solid var(--border-light); }
        td:first-child { border-left: 1px solid var(--border-light); border-top-left-radius: 12px; border-bottom-left-radius: 12px; border-left: 4px solid var(--primary); }
        td:last-child { border-right: 1px solid var(--border-light); border-top-right-radius: 12px; border-bottom-right-radius: 12px; }
        tr { transition: transform 0.2s ease, box-shadow 0.2s ease; }
        tr:hover { transform: translateY(-2px); box-shadow: 0 4px 10px rgba(0,0,0,0.05); position: relative; z-index: 5; }
        
        .time-text { color: var(--text-muted); font-weight: 700; font-size: 0.9rem;}
        .subject-text { font-weight: 800; color: var(--text-main); font-size: 1.05rem;}
        .room-badge { background: #f0fdf4; padding: 6px 12px; border-radius: 8px; font-size: 0.85rem; font-weight: 800; color: var(--primary); border: 1px solid #d1fae5;}
        .break-time td { background: #f9fafb !important; text-align: center; color: var(--text-muted); font-weight: 800; letter-spacing: 2px; font-size: 0.85rem; border-left: 1px solid var(--border-light) !important; }
        .empty-state { text-align: center; color: var(--text-muted); font-weight: 600; padding: 30px; font-style: italic; border-left: 1px solid var(--border-light) !important;}
        
        .day-tbody { display: none; }
        .day-tbody.active-tbody { display: table-row-group; animation: pageFadeIn 0.3s ease-out; }

        .row-actions { display: flex; gap: 12px; opacity: 0; transition: opacity 0.3s; justify-content: flex-end;}
        tr:hover .row-actions { opacity: 1; }
        .edit-icon { color: var(--primary); background: #ecfdf5; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: 0.2s; }
        .delete-icon { color: var(--danger); background: #fef2f2; padding: 8px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; transition: 0.2s; }

        /* TASKS */
        .task-list { display: flex; flex-direction: column; gap: 15px; }
        .task-item { display: flex; justify-content: space-between; align-items: center; padding: 18px 20px; border: 1px solid var(--border-light); border-radius: 12px; transition: 0.3s; background: white; position: relative; overflow: hidden; }
        .task-item:hover { border-color: var(--accent); box-shadow: 0 4px 10px rgba(0,0,0,0.05); transform: translateX(5px); }
        .task-left { display: flex; align-items: center; gap: 15px; }
        .task-checkbox { width: 24px; height: 24px; border: 2px solid #cbd5e1; border-radius: 6px; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: 0.2s; color: transparent; font-size: 0.8rem; }
        .task-checkbox.checked { background: var(--success); border-color: var(--success); color: white; }
        .task-details h4 { font-size: 1rem; font-weight: 800; color: var(--text-main); margin-bottom: 4px; transition: 0.3s; }
        .task-details p { font-size: 0.85rem; color: var(--text-muted); font-weight: 600;}
        .task-item.completed-task .task-details h4 { text-decoration: line-through; color: #9ca3af; }
        .task-due { font-size: 0.75rem; font-weight: 800; padding: 6px 10px; border-radius: 6px; background: #fef2f2; color: var(--danger); transition: 0.3s; letter-spacing: 0.5px; text-transform: uppercase;}
        .task-due.safe { background: #f0fdf4; color: var(--primary); }
        .task-delete { position: absolute; right: -50px; background: var(--danger); color: white; height: 100%; width: 50px; display: flex; justify-content: center; align-items: center; cursor: pointer; transition: 0.3s; top: 0; font-size: 1.1rem; }
        .task-item:hover .task-delete { right: 0; }
        .task-item:hover .task-due { margin-right: 50px; }

        /* REVIEWERS */
        .reviewer-list { display: flex; flex-direction: column; gap: 15px; }
        .reviewer-item { display: flex; align-items: center; gap: 18px; padding: 15px 20px; background: white; border: 1px solid var(--border-light); border-radius: 12px; transition: 0.3s; }
        .reviewer-item:hover { border-color: var(--primary); box-shadow: 0 4px 10px rgba(0,0,0,0.05); transform: translateY(-2px);}
        .reviewer-icon { font-size: 2rem; color: #ef4444; }
        .reviewer-icon.doc { color: #3b82f6; }
        .reviewer-info { flex-grow: 1; }
        .reviewer-info h4 { font-size: 0.95rem; font-weight: 700; margin-bottom: 4px; color: var(--text-main); }
        .reviewer-info p { font-size: 0.8rem; color: var(--text-muted); font-weight: 600;}
        .reviewer-action { color: #9ca3af; cursor: pointer; transition: 0.3s; font-size: 1.2rem; padding: 8px; border-radius: 8px; }
        .reviewer-action:hover { color: var(--danger); background: #fef2f2; }
        .upload-label { cursor: pointer; margin: 0; }
        #file-upload-input { display: none; }

        /* ANNOUNCEMENTS */
        .announcement-feed { display: flex; flex-direction: column; gap: 20px; }
        .announcement { padding: 25px; border-radius: 16px; background: white; border: 1px solid var(--border-light); border-left: 5px solid var(--primary); position: relative; transition: 0.3s; }
        .announcement:hover { box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .announcement.urgent { border-left-color: var(--danger); background: #fffcfc; border-color: #fee2e2; border-left-width: 5px;}
        .announcement.urgent .date { color: var(--danger); }
        .urgent-badge { position: absolute; top: -12px; right: 20px; background: var(--danger); color: white; padding: 4px 12px; border-radius: 20px; font-size: 0.75rem; font-weight: 800; animation: pulse 2s infinite; letter-spacing: 1px;}
        .date { font-size: 0.8rem; color: var(--text-muted); margin-bottom: 10px; font-weight: 800; display: flex; align-items: center; gap: 6px; text-transform: uppercase; letter-spacing: 0.5px;}
        .announcement h4 { font-size: 1.15rem; font-weight: 800; color: var(--text-main); margin-bottom: 8px; line-height: 1.3;}
        .announcement p { font-size: 0.95rem; color: var(--text-muted); line-height: 1.6; font-weight: 500;}
        
        .jam-redirect-btn { width: 100%; padding: 18px; background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; border-radius: 12px; cursor: pointer; font-size: 1.05rem; font-weight: 800; transition: 0.3s; display: flex; justify-content: center; align-items: center; gap: 10px; text-decoration: none; margin-top: 15px;}
        .jam-redirect-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 15px rgba(0,0,0,0.2); filter: brightness(1.1); }

        /* MODALS */
        .custom-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(17, 24, 39, 0.7); display: none; justify-content: center; align-items: center; z-index: 3000; backdrop-filter: blur(8px); opacity: 0; transition: opacity 0.3s ease;}
        .custom-modal.active { display: flex; opacity: 1; }
        .modal-box { background: white; padding: 35px; border-radius: 20px; width: 90%; max-width: 420px; box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); transform: scale(0.95) translateY(20px); transition: 0.3s; border: 1px solid rgba(255,255,255,0.2); }
        .custom-modal.active .modal-box { transform: scale(1) translateY(0); }
        .modal-box h3 { color: var(--text-main); margin-bottom: 25px; font-size: 1.4rem; font-weight: 800; display: flex; align-items: center; gap: 10px; }
        .modal-box h3 i { color: var(--primary); }
        .modal-box label { display: block; font-size: 0.85rem; font-weight: 800; color: var(--text-muted); margin-bottom: 6px; text-transform: uppercase; letter-spacing: 0.5px;}
        .modal-box input { width: 100%; padding: 12px 15px; border: 2px solid var(--border-light); border-radius: 10px; margin-bottom: 20px; outline: none; transition: 0.3s; font-family: 'Inter'; font-size: 1rem; font-weight: 600; color: var(--text-main); background: #f8fafc;}
        .modal-box input:focus { border-color: var(--primary); background: white; box-shadow: 0 0 0 4px rgba(4, 120, 87, 0.1); }
        .modal-buttons { display: flex; gap: 12px; justify-content: flex-end; margin-top: 10px; }
        .modal-buttons button { padding: 12px 24px; border-radius: 10px; font-weight: 800; font-size: 0.95rem; cursor: pointer; border: none; transition: 0.2s; font-family: 'Inter'; }
        .btn-cancel { background: white; color: var(--text-muted); border: 2px solid var(--border-light) !important; }

        @media (max-width: 768px) {
            body { flex-direction: column; overflow-y: auto; height: auto;}
            .sidebar { width: 100%; height: auto; flex-direction: column; padding: 10px; position: sticky; top: 0; box-shadow: var(--shadow-sm); z-index: 1000;}
            .sidebar-header { flex-direction: row; justify-content: space-between; padding: 10px; text-align: left; border-bottom: none;}
            .sidebar-header h3 { display: block; font-size: 1rem; margin:0;}
            .sidebar-header p { display: none; } 
            .sidebar-logo { width: 40px; height: 40px; margin: 0;}
            
            .sidebar-menu { display: flex; flex-direction: row; overflow-x: auto; padding: 5px; gap: 5px; scrollbar-width: none; }
            .sidebar-menu::-webkit-scrollbar { display: none; }
            .sidebar-menu li { padding: 10px 15px; font-size: 0.85rem; border-left: none; border-bottom: 3px solid transparent; border-radius: 8px;}
            .sidebar-menu li.active { border-left: none; border-bottom: 3px solid var(--accent); background: rgba(255,255,255,0.05); }
            
            .top-nav { padding: 15px 20px; }
            .top-nav h2 { font-size: 1.1rem; }
            .dashboard-container { padding: 15px; }
            .welcome-banner { flex-direction: column; text-align: left; align-items: flex-start; gap: 20px; padding: 25px; }
            
            .grid { grid-template-columns: 1fr; }
            td { display: block; border: none !important; padding: 10px 15px; }
            tr { display: block; margin-bottom: 15px; border: 1px solid var(--border-light); border-radius: 12px; border-left: 4px solid var(--primary); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
            thead { display: none; }
            
            .row-actions { opacity: 1; justify-content: flex-start; padding-top: 10px; border-top: 1px solid #eee; margin-top: 5px; }
            .break-time td { border-left: none !important; background: #f9fafb; border: 1px solid var(--border-light); }
            
            .task-delete { opacity: 1; position: static; width: auto; height: auto; background: transparent; color: var(--danger); margin-left: auto; display: inline-flex;}
            .task-delete i { background: #fef2f2; padding: 8px; border-radius: 6px; }
            .task-item { padding-right: 20px; flex-direction: column; align-items: flex-start; gap: 10px; }
            .task-due { margin-right: 0 !important; margin-left: 0; }
            .task-item:hover .task-delete { right: auto; }
            
            .reviewer-action { opacity: 1; color: var(--danger); background: #fef2f2;}
        }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="sidebar-header">
            <img src="logo.jpg" alt="SAAPI Logo" class="sidebar-logo">
            <h3 style="font-size: 1.1rem; line-height: 1.4; margin-bottom: 5px;">ST. AUGUSTINE ACADEMY<br>OF PAMPANGA, INC.</h3>
            <p>Faith &bull; Service &bull; Excellence</p>
        </div>
        <ul class="sidebar-menu">
            <li class="nav-item student-only active" onclick="switchView('all', this)"><i class="fa-solid fa-table-columns"></i> Dashboard</li>
            <li class="nav-item student-only" onclick="switchView('schedule-card', this)"><i class="fa-solid fa-calendar-days"></i> My Schedule</li>
            
            <li class="nav-item applicant-only" onclick="switchView('admission-card', this)" style="display:none;"><i class="fa-solid fa-user-check"></i> Admission Status</li>
            
            <li class="nav-item" onclick="switchView('requests-card', this)"><i class="fa-solid fa-folder-open"></i> Requests</li>
            <li class="nav-item student-only" onclick="switchView('academics-card', this)"><i class="fa-solid fa-book-open-reader"></i> Academics</li>
        </ul>
    </div>

    <div class="main-content">
        <div class="top-nav">
            <h2 id="top-nav-title">Dashboard Overview</h2>
            <div class="nav-right">
                <i class="fa-solid fa-bell notification-icon"><span class="notification-badge">3</span></i>
                <div class="profile-container">
                    <div class="user-profile" onclick="toggleProfileMenu()">
                        <div class="avatar" id="nav-avatar">D</div>
                        <span id="nav-name">Demo Student <i class="fa-solid fa-chevron-down" style="font-size: 0.7rem; color: #9ca3af;"></i></span>
                    </div>
                    <div class="dropdown-menu" id="profileDropdown">
                        <div class="dropdown-header">
                            <h4 id="dropdown-name">Demo Student</h4>
                            <p id="dropdown-email">demo@saap.edu.ph</p>
                        </div>
                        <ul class="dropdown-links">
                            <li><a href="#"><i class="fa-solid fa-user-pen" style="color: #9ca3af;"></i> Edit Profile</a></li>
                            <li onclick="resetDemoData()"><a href="#" style="color: var(--danger);"><i class="fa-solid fa-rotate-right"></i> Reset Demo Data</a></li>
                            <li><a href="index.html" class="sign-out"><i class="fa-solid fa-arrow-right-from-bracket"></i> Secure Sign Out</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="dashboard-container">
            <div class="welcome-banner" id="welcome-banner">
                <div class="welcome-text">
                    <h2 id="banner-greeting">Welcome back, Demo!</h2>
                    <p id="banner-subtext">Grade 11 - STEM Block B &nbsp;|&nbsp; S.Y. 2026-2027</p>
                    <p style="font-size: 0.95rem; margin-top: 15px; color: var(--accent); font-weight: 700; font-style: italic;">"Ad Astra, Per Fidem"</p>
                </div>
                <div class="id-badge">
                    <p id="badge-title">Student ID Number</p>
                    <h3 id="badge-id">2026-0001</h3>
                </div>
            </div>

            <div class="quick-stats student-only" id="quick-stats-student">
                <div class="stat-card">
                    <div class="stat-icon" style="color: #10b981; background: #ecfdf5;"><i class="fa-solid fa-star"></i></div>
                    <div class="stat-info"><p>Current GPA</p><h3>92.5 <span style="background: #ecfdf5; color: #047857;">Dean's List</span></h3></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="color: #3b82f6; background: #eff6ff;"><i class="fa-solid fa-calendar-check"></i></div>
                    <div class="stat-info"><p>Attendance Rate</p><h3>98.2%</h3></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="color: #f59e0b; background: #fffbeb;"><i class="fa-solid fa-book"></i></div>
                    <div class="stat-info"><p>Active Subjects</p><h3>8 Classes</h3></div>
                </div>
            </div>

            <div class="quick-stats applicant-only" id="quick-stats-applicant" style="display: none;">
                <div class="stat-card">
                    <div class="stat-icon" style="color: #3b82f6; background: #eff6ff;"><i class="fa-solid fa-file-signature"></i></div>
                    <div class="stat-info"><p>Application Step</p><h3 id="stat-step">2 / 4 <span style="background: #eff6ff; color: #2563eb;">Processing</span></h3></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="color: #10b981; background: #ecfdf5;"><i class="fa-solid fa-money-bill-wave"></i></div>
                    <div class="stat-info"><p>Testing Fee</p><h3>â‚±500.00 <span style="background: #ecfdf5; color: #047857;">Paid</span></h3></div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon" style="color: #f59e0b; background: #fffbeb;"><i class="fa-solid fa-clipboard-check"></i></div>
                    <div class="stat-info"><p>Exam Status</p><h3 id="stat-exam">Pending <span style="background: #fef3c7; color: #d97706;">Action Req.</span></h3></div>
                </div>
            </div>

            <div class="grid" id="main-grid">
                
                <div class="left-col" id="left-col">
                    
                    <div class="card filterable-card applicant-only" id="applicant-pending-view" data-view="admission-card" style="display:none;">
                        <div class="card-header" style="background: #eff6ff; padding: 20px; border-radius: 12px; margin-bottom: 25px; border-bottom: none; display: block; border-left: 5px solid #3b82f6;">
                            <h3 style="color: #1e3a8a; margin: 0; font-size: 1.15rem;"><i class="fa-solid fa-clock"></i> STATUS: APPLICATION PROCESSED & WAITING FOR EXAM</h3>
                            <p style="margin: 5px 0 0 0; font-size: 0.95rem; color: #1e3a8a; font-weight: 500;">Please read the examination guidelines carefully and bring your missing documents on exam day.</p>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px;">
                            <div>
                                <h4 style="color: var(--text-main); margin-bottom: 15px; font-weight: 800; display: flex; align-items: center; gap: 8px;"><i class="fa-solid fa-calendar-check" style="color: var(--accent);"></i> Entrance Exam Schedule</h4>
                                <div style="background: #f8fafc; border: 1px solid var(--border-light); border-radius: 12px; padding: 20px;">
                                    <p style="margin-bottom: 8px; font-weight: 500;"><strong style="color: var(--text-main);">Date:</strong> Saturday, March 14, 2026</p>
                                    <p style="margin-bottom: 8px; font-weight: 500;"><strong style="color: var(--text-main);">Time:</strong> 8:00 AM - 12:00 NN</p>
                                    <p style="margin-bottom: 8px; font-weight: 500;"><strong style="color: var(--text-main);">Venue:</strong> Main Auditorium, St. Augustine Academy</p>
                                    <hr style="border: none; border-top: 1px solid var(--border-light); margin: 15px 0;">
                                    <p style="font-size: 0.85rem; color: var(--text-muted); line-height: 1.6;"><strong>Reminders:</strong> Please bring 2 lead pencils, a valid ID, and your physical test permit. Please arrive 30 minutes before the scheduled time.</p>
                                </div>
                            </div>
                            
                            <div>
                                <h4 style="color: var(--text-main); margin-bottom: 15px; font-weight: 800; display: flex; align-items: center; gap: 8px;"><i class="fa-solid fa-folder-open" style="color: var(--accent);"></i> Document Checklist</h4>
                                <div class="task-list">
                                    <div class="task-item completed-task" style="padding: 12px 20px;">
                                        <div class="task-left">
                                            <div class="task-checkbox checked"><i class="fa-solid fa-check"></i></div>
                                            <div class="task-details"><h4 style="margin:0;">PSA Birth Certificate</h4></div>
                                        </div>
                                    </div>
                                    <div class="task-item completed-task" style="padding: 12px 20px;">
                                        <div class="task-left">
                                            <div class="task-checkbox checked"><i class="fa-solid fa-check"></i></div>
                                            <div class="task-details"><h4 style="margin:0;">2x2 ID Picture</h4></div>
                                        </div>
                                    </div>
                                    <div class="task-item" id="pending-moral-box" style="padding: 12px 20px; border-left: 4px solid var(--danger);">
                                        <div class="task-left">
                                            <div class="task-checkbox" id="pending-moral-check"></div>
                                            <div class="task-details"><h4 id="pending-moral-text" style="margin:0; color: var(--text-main); text-decoration: none;">Certificate of Good Moral</h4></div>
                                        </div>
                                        <div class="task-due" id="pending-moral-status" style="margin:0;">Missing</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card filterable-card applicant-only" id="applicant-passed-view" data-view="admission-card" style="display:none;">
                        <div class="card-header" style="background: #ecfdf5; padding: 20px; border-radius: 12px; margin-bottom: 25px; border-bottom: none; display: block; border-left: 5px solid var(--success);">
                            <h3 style="color: var(--primary); margin: 0; font-size: 1.15rem;"><i class="fa-solid fa-circle-check"></i> STATUS: ADMISSION GRANTED & ENROLLMENT COMPLETE</h3>
                            <p style="margin: 5px 0 0 0; font-size: 0.95rem; color: var(--primary); font-weight: 500;">Congratulations! You have passed the entrance examinations and all your documents have been verified. Welcome to SAAPI!</p>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px;">
                            <div>
                                <h4 style="color: var(--text-main); margin-bottom: 15px; font-weight: 800; display: flex; align-items: center; gap: 8px;"><i class="fa-solid fa-id-card" style="color: var(--accent);"></i> Your Official SAAP Account</h4>
                                <div style="background: #f8fafc; border: 1px solid var(--border-light); border-radius: 12px; padding: 20px; border-left: 4px solid var(--primary);">
                                    <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 15px;">Please use these credentials to log into the main Student Portal to view your class schedules, modules, and grades.</p>
                                    
                                    <p style="margin-bottom: 8px; font-weight: 500;"><strong style="color: var(--text-main);">Student ID:</strong> 2026-0001</p>
                                    <p style="margin-bottom: 8px; font-weight: 500;"><strong style="color: var(--text-main);">SAAP Email:</strong> demo@saap.edu.ph</p>
                                    <p style="margin-bottom: 8px; font-weight: 500;"><strong style="color: var(--text-main);">Password:</strong> demo123</p>
                                    
                                    <button class="action-btn" style="width: 100%; justify-content: center; margin-top: 20px; padding: 12px; font-size: 0.95rem;" onclick="activateStudentAccount()">Login to Student Dashboard <i class="fa-solid fa-arrow-right"></i></button>
                                </div>
                            </div>
                            
                            <div>
                                <h4 style="color: var(--text-main); margin-bottom: 15px; font-weight: 800; display: flex; align-items: center; gap: 8px;"><i class="fa-solid fa-folder-check" style="color: var(--accent);"></i> Document Checklist</h4>
                                <div class="task-list">
                                    <div class="task-item completed-task" style="padding: 12px 20px;">
                                        <div class="task-left">
                                            <div class="task-checkbox checked"><i class="fa-solid fa-check"></i></div>
                                            <div class="task-details"><h4 style="margin:0;">PSA Birth Certificate</h4></div>
                                        </div>
                                    </div>
                                    <div class="task-item completed-task" style="padding: 12px 20px;">
                                        <div class="task-left">
                                            <div class="task-checkbox checked"><i class="fa-solid fa-check"></i></div>
                                            <div class="task-details"><h4 style="margin:0;">2x2 ID Picture</h4></div>
                                        </div>
                                    </div>
                                    <div class="task-item completed-task" style="padding: 12px 20px;">
                                        <div class="task-left">
                                            <div class="task-checkbox checked"><i class="fa-solid fa-check"></i></div>
                                            <div class="task-details"><h4 style="margin:0;">Certificate of Good Moral</h4></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card filterable-card student-only" data-view="schedule-card">
                        <div class="card-header">
                            <h3><i class="fa-solid fa-calendar-week"></i> My Timetable</h3>
                            <div style="display: flex; gap: 12px; align-items: center;">
                                <div class="schedule-controls">
                                    <select id="day-selector" onchange="switchDay()">
                                        <option value="Monday">Monday (Today)</option>
                                        <option value="Tuesday">Tuesday</option>
                                        <option value="Wednesday">Wednesday</option>
                                        <option value="Thursday">Thursday</option>
                                        <option value="Friday">Friday</option>
                                    </select>
                                </div>
                                <button class="action-btn" onclick="openClassModal()"><i class="fa-solid fa-plus"></i> Add Class</button>
                            </div>
                        </div>
                        
                        <table id="schedule-table">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Subject & Instructor</th>
                                    <th>Room</th>
                                    <th style="text-align: right;">Manage</th>
                                </tr>
                            </thead>
                            
                            <tbody id="tbody-Monday" class="day-tbody active-tbody">
                                <tr>
                                    <td class="col-time time-text">7:30 AM - 9:00 AM</td>
                                    <td><div class="col-subject subject-text">General Mathematics</div><div class="col-instructor" style="font-size: 0.85rem; color: #6b7280; margin-top: 4px;"><i class="fa-solid fa-chalkboard-user"></i> Mr. D. Santos</div></td>
                                    <td><span class="room-badge col-room">RM 204</span></td>
                                    <td><div class="row-actions"><i class="fa-solid fa-pen edit-icon" onclick="openClassModal(this)"></i><i class="fa-solid fa-trash delete-icon" onclick="deleteClass(this)"></i></div></td>
                                </tr>
                                <tr>
                                    <td class="col-time time-text">9:00 AM - 10:30 AM</td>
                                    <td><div class="col-subject subject-text">Earth & Life Science</div><div class="col-instructor" style="font-size: 0.85rem; color: #6b7280; margin-top: 4px;"><i class="fa-solid fa-chalkboard-user"></i> Ms. L. Reyes</div></td>
                                    <td><span class="room-badge col-room">LAB 1</span></td>
                                    <td><div class="row-actions"><i class="fa-solid fa-pen edit-icon" onclick="openClassModal(this)"></i><i class="fa-solid fa-trash delete-icon" onclick="deleteClass(this)"></i></div></td>
                                </tr>
                                <tr class="break-time"><td colspan="4"><i class="fa-solid fa-mug-hot"></i> MORNING BREAK (10:30 AM - 11:00 AM)</td></tr>
                                <tr>
                                    <td class="col-time time-text">11:00 AM - 12:30 PM</td>
                                    <td><div class="col-subject subject-text">Oral Communication</div><div class="col-instructor" style="font-size: 0.85rem; color: #6b7280; margin-top: 4px;"><i class="fa-solid fa-chalkboard-user"></i> Mrs. C. Cruz</div></td>
                                    <td><span class="room-badge col-room">RM 205</span></td>
                                    <td><div class="row-actions"><i class="fa-solid fa-pen edit-icon" onclick="openClassModal(this)"></i><i class="fa-solid fa-trash delete-icon" onclick="deleteClass(this)"></i></div></td>
                                </tr>
                            </tbody>

                            <tbody id="tbody-Tuesday" class="day-tbody">
                                <tr>
                                    <td class="col-time time-text">8:00 AM - 10:00 AM</td>
                                    <td><div class="col-subject subject-text">21st Century Literature</div><div class="col-instructor" style="font-size: 0.85rem; color: #6b7280; margin-top: 4px;"><i class="fa-solid fa-chalkboard-user"></i> Ms. A. Garcia</div></td>
                                    <td><span class="room-badge col-room">RM 302</span></td>
                                    <td><div class="row-actions"><i class="fa-solid fa-pen edit-icon" onclick="openClassModal(this)"></i><i class="fa-solid fa-trash delete-icon" onclick="deleteClass(this)"></i></div></td>
                                </tr>
                            </tbody>

                            <tbody id="tbody-Wednesday" class="day-tbody"><tr><td colspan="4" class="empty-state">No classes scheduled yet. Click "Add Class" to update.</td></tr></tbody>
                            <tbody id="tbody-Thursday" class="day-tbody"><tr><td colspan="4" class="empty-state">No classes scheduled yet. Click "Add Class" to update.</td></tr></tbody>
                            <tbody id="tbody-Friday" class="day-tbody"><tr><td colspan="4" class="empty-state">No classes scheduled yet. Click "Add Class" to update.</td></tr></tbody>
                        </table>
                    </div>

                    <div class="card filterable-card student-only" data-view="academics-card">
                        <div class="card-header">
                            <h3><i class="fa-solid fa-list-check"></i> Assignments & Deadlines</h3>
                            <button class="action-btn" onclick="openTaskModal()"><i class="fa-solid fa-plus"></i> New Task</button>
                        </div>
                        <div class="task-list" id="task-list-container">
                            <div class="task-item">
                                <div class="task-left">
                                    <div class="task-checkbox" onclick="toggleTask(this)"><i class="fa-solid fa-check"></i></div>
                                    <div class="task-details"><h4>Math Problem Set 4</h4><p>General Mathematics</p></div>
                                </div>
                                <div class="task-due">Due Tomorrow</div>
                                <div class="task-delete" onclick="deleteTaskItem(this)"><i class="fa-solid fa-trash"></i></div>
                            </div>
                            <div class="task-item">
                                <div class="task-left">
                                    <div class="task-checkbox" onclick="toggleTask(this)"><i class="fa-solid fa-check"></i></div>
                                    <div class="task-details"><h4>Ecosystems Lab Report</h4><p>Earth & Life Science</p></div>
                                </div>
                                <div class="task-due safe">Due in 3 days</div>
                                <div class="task-delete" onclick="deleteTaskItem(this)"><i class="fa-solid fa-trash"></i></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="right-col" id="right-col">
                    
                    <div class="card filterable-card applicant-only" data-view="admission-card" style="display:none;">
                        <div class="card-header" style="border: none; padding-bottom: 0; margin-bottom: 15px;">
                            <h3 style="font-size: 1.15rem;"><i class="fa-solid fa-route"></i> Live Status Tracker</h3>
                        </div>
                        <div class="timeline">
                            <div class="timeline-item completed">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Application Submitted</h4>
                                    <p>Online form and basic info received.</p>
                                    <span class="timeline-date">Oct 24, 2025</span>
                                </div>
                            </div>
                            <div class="timeline-item completed" id="track-docs">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Document Verification</h4>
                                    <p>All submitted requirements validated.</p>
                                    <span class="timeline-date">Oct 26, 2025</span>
                                </div>
                            </div>
                            <div class="timeline-item active" id="track-exam">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Entrance Examination</h4>
                                    <p>Schedule generated and pending exam.</p>
                                    <span class="timeline-date" style="color: var(--primary);" id="track-exam-status">Current Status</span>
                                </div>
                            </div>
                            <div class="timeline-item" id="track-grant">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Admission Granted</h4>
                                    <p>SAAP ID and credentials generated.</p>
                                    <span class="timeline-date" style="color: var(--primary); display:none;" id="track-grant-status">Current Status</span>
                                </div>
                            </div>
                            <div class="timeline-item">
                                <div class="timeline-icon"></div>
                                <div class="timeline-content">
                                    <h4>Officially Enrolled</h4>
                                    <p>Pending your first login to the Student Dashboard.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card filterable-card student-only" data-view="academics-card">
                        <div class="card-header">
                            <h3><i class="fa-solid fa-book-open-reader"></i> Study Materials</h3>
                            <label class="action-btn upload-label" for="file-upload-input"><i class="fa-solid fa-cloud-arrow-up"></i> Upload</label>
                            <input type="file" id="file-upload-input" onchange="uploadReviewer(event)">
                        </div>
                        <div class="reviewer-list" id="reviewer-list-container">
                            <div class="reviewer-item">
                                <i class="fa-solid fa-file-pdf reviewer-icon"></i>
                                <div class="reviewer-info"><h4>Gen_Math_Q1_Reviewer.pdf</h4><p>Uploaded 2 days ago</p></div>
                                <i class="fa-solid fa-trash reviewer-action" title="Delete" onclick="deleteReviewerItem(this)"></i>
                            </div>
                            <div class="reviewer-item">
                                <i class="fa-solid fa-file-word reviewer-icon doc"></i>
                                <div class="reviewer-info"><h4>EarthScience_Notes.docx</h4><p>Uploaded last week</p></div>
                                <i class="fa-solid fa-trash reviewer-action" title="Delete" onclick="deleteReviewerItem(this)"></i>
                            </div>
                        </div>
                    </div>

                    <div class="card filterable-card" data-view="dashboard-only">
                        <div class="card-header" style="border: none; padding-bottom: 0; margin-bottom: 15px;">
                            <h3><i class="fa-solid fa-bullhorn"></i> Campus Updates</h3>
                        </div>
                        <div class="announcement-feed">
                            <div class="announcement urgent">
                                <div class="urgent-badge">EMERGENCY</div>
                                <div class="date"><i class="fa-solid fa-triangle-exclamation"></i> POSTED 1 HOUR AGO</div>
                                <h4>Suspension of Afternoon Classes</h4>
                                <p>Due to localized flooding, all SHS classes are suspended. Stay safe and monitor official channels.</p>
                            </div>
                            <div class="announcement">
                                <div class="date"><i class="fa-regular fa-clock"></i> OCTOBER 15, 2026</div>
                                <h4>Intramurals Week Kick-off! ðŸ€</h4>
                                <p>Wear your designated team color shirts starting Monday. Support your strand!</p>
                            </div>
                        </div>
                    </div>

                    <div class="card filterable-card" data-view="requests-card">
                        <div class="card-header" style="border: none; padding-bottom: 0; margin-bottom: 10px;">
                            <h3 style="font-size: 1.15rem;"><i class="fa-solid fa-folder-open"></i> Service Requests</h3>
                        </div>
                        <p style="font-size: 0.9rem; color: var(--text-muted); margin-bottom: 15px;">Need a Certificate of Good Moral or Form 137? Use our digital portal below.</p>
                        <a href="#" target="_blank" class="jam-redirect-btn" onclick="alert('NOTE FOR DEMO: This button will redirect to Jam\'s Website later!')">
                            Access Document Portal <i class="fa-solid fa-arrow-up-right-from-square"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="custom-modal" id="class-modal">
        <div class="modal-box">
            <h3 id="class-modal-title"><i class="fa-solid fa-calendar-plus"></i> Add New Class</h3>
            <form onsubmit="saveClass(event)">
                <label>Subject Title</label>
                <input type="text" id="class-subject" placeholder="e.g. Physical Education" required>
                <label>Class Schedule (Time)</label>
                <input type="text" id="class-time" placeholder="e.g. 1:00 PM - 2:00 PM" required>
                <label>Instructor Name</label>
                <input type="text" id="class-instructor" placeholder="e.g. Mr. Santos" required>
                <label>Room Assignment</label>
                <input type="text" id="class-room" placeholder="e.g. Gymnasium" required>
                <div class="modal-buttons">
                    <button type="button" class="btn-cancel" onclick="closeModals()">Cancel</button>
                    <button type="submit" class="btn-save">Save Class</button>
                </div>
            </form>
        </div>
    </div>

    <div class="custom-modal" id="task-modal">
        <div class="modal-box">
            <h3><i class="fa-solid fa-list-check"></i> Add New Assignment</h3>
            <form onsubmit="saveTask(event)">
                <label>Assignment Title</label>
                <input type="text" id="task-title" placeholder="e.g. Read Chapter 4" required>
                <label>Related Subject</label>
                <input type="text" id="task-subject" placeholder="e.g. Earth Science" required>
                <label>Due Date / Urgency</label>
                <input type="text" id="task-deadline" placeholder="e.g. Due Tomorrow" required>
                <div class="modal-buttons">
                    <button type="button" class="btn-cancel" onclick="closeModals()">Cancel</button>
                    <button type="submit" class="btn-save">Save Assignment</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        window.onload = function() {
            applyUserRole();
            
            if(localStorage.getItem('saap_tasks')) document.getElementById('task-list-container').innerHTML = localStorage.getItem('saap_tasks');
            if(localStorage.getItem('saap_reviewers')) document.getElementById('reviewer-list-container').innerHTML = localStorage.getItem('saap_reviewers');
            if(localStorage.getItem('saap_schedule')) {
                const scheduleData = JSON.parse(localStorage.getItem('saap_schedule'));
                ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'].forEach(day => {
                    if(scheduleData[day]) document.getElementById('tbody-' + day).innerHTML = scheduleData[day];
                });
            }
        };

        // NEW ROLE LOGIC THAT LISTENS TO ADMIN
        function applyUserRole() {
            const role = localStorage.getItem('userRole') || 'student'; 
            
            if (role === 'applicant') {
                document.querySelectorAll('.student-only').forEach(el => el.style.display = 'none');
                document.querySelectorAll('.applicant-only').forEach(el => {
                    if(el.tagName === 'LI') el.style.display = 'flex';
                    else el.style.display = 'block';
                });
                
                document.getElementById('banner-greeting').innerText = 'Welcome, Applicant!';
                document.getElementById('banner-subtext').innerText = 'Track your enrollment progress here.';
                document.getElementById('badge-title').innerText = 'Temporary ID';
                document.getElementById('badge-id').innerText = 'TEMP-2026-089';
                
                document.getElementById('nav-name').innerHTML = 'Applicant <i class="fa-solid fa-chevron-down" style="font-size: 0.7rem; color: #9ca3af;"></i>';
                document.getElementById('dropdown-name').innerText = 'New Applicant';
                document.getElementById('dropdown-email').innerText = 'pending@saap.edu.ph';
                document.getElementById('nav-avatar').innerText = 'A';
                
                switchView('admission-card', document.querySelector('.applicant-only.nav-item'));
            } else {
                document.querySelectorAll('.applicant-only').forEach(el => el.style.display = 'none');
                document.querySelectorAll('.student-only').forEach(el => {
                    if(el.tagName === 'LI') el.style.display = 'flex';
                    else if(el.classList.contains('quick-stats')) el.style.display = 'grid';
                    else el.style.display = 'block';
                });
                switchView('all', document.querySelector('.student-only.nav-item'));
            }
        }

        // --- DYNAMICALLY UPDATES TRACKER BASED ON ADMIN DASHBOARD ---
        function checkApplicantStatus() {
            const applicantStatus = localStorage.getItem('demoApplicantStatus') || 'pending';
            
            const pendingView = document.getElementById('applicant-pending-view');
            const passedView = document.getElementById('applicant-passed-view');

            const trackDocs = document.getElementById('track-docs');
            const trackExam = document.getElementById('track-exam');
            const trackGrant = document.getElementById('track-grant');
            const trackExamStatus = document.getElementById('track-exam-status');
            const trackGrantStatus = document.getElementById('track-grant-status');

            const moralBox = document.getElementById('pending-moral-box');
            const moralCheck = document.getElementById('pending-moral-check');
            const moralStatus = document.getElementById('pending-moral-status');

            const statStep = document.getElementById('stat-step');
            const statExam = document.getElementById('stat-exam');

            if(pendingView && passedView) {
                if (applicantStatus === 'passed') {
                    pendingView.style.display = 'none';
                    passedView.style.display = 'block';
                    
                    trackDocs.className = 'timeline-item completed';
                    trackExam.className = 'timeline-item completed';
                    trackExamStatus.innerText = 'Nov 02, 2025';
                    trackExamStatus.style.color = '#9ca3af';
                    trackExamStatus.style.display = 'inline-block';

                    trackGrant.className = 'timeline-item active';
                    trackGrantStatus.style.display = 'inline-block';
                    trackGrantStatus.innerText = 'Current Status';
                    
                    statStep.innerHTML = '4 / 4 <span style="background: #ecfdf5; color: #047857; padding: 3px 8px; border-radius: 20px;">Complete</span>';
                    statExam.innerHTML = 'Passed <span style="background: #ecfdf5; color: #047857; padding: 3px 8px; border-radius: 20px;">Passed</span>';

                } else if (applicantStatus === 'exam') {
                    pendingView.style.display = 'block';
                    passedView.style.display = 'none';

                    trackDocs.className = 'timeline-item completed';
                    trackExam.className = 'timeline-item active';
                    trackExamStatus.innerText = 'Current Status';
                    trackExamStatus.style.color = 'var(--primary)';
                    trackExamStatus.style.display = 'inline-block';

                    trackGrant.className = 'timeline-item';
                    trackGrantStatus.style.display = 'none';

                    moralBox.style.borderLeft = 'none';
                    moralCheck.className = 'task-checkbox checked';
                    moralCheck.innerHTML = '<i class="fa-solid fa-check"></i>';
                    document.getElementById('pending-moral-text').style.textDecoration = 'line-through';
                    document.getElementById('pending-moral-text').style.color = '#9ca3af';
                    moralStatus.style.display = 'none';

                    statStep.innerHTML = '3 / 4 <span style="background: #eff6ff; color: #2563eb; padding: 3px 8px; border-radius: 20px;">Ready</span>';
                    statExam.innerHTML = 'Pending <span style="background: #eff6ff; color: #2563eb; padding: 3px 8px; border-radius: 20px;">Scheduled</span>';
                } else { // pending or rejected
                    pendingView.style.display = 'block';
                    passedView.style.display = 'none';

                    trackDocs.className = 'timeline-item active';
                    
                    trackExam.className = 'timeline-item';
                    trackExamStatus.style.display = 'none';

                    trackGrant.className = 'timeline-item';
                    trackGrantStatus.style.display = 'none';

                    moralBox.style.borderLeft = '4px solid var(--danger)';
                    moralCheck.className = 'task-checkbox';
                    moralCheck.innerHTML = '';
                    document.getElementById('pending-moral-text').style.textDecoration = 'none';
                    document.getElementById('pending-moral-text').style.color = 'var(--text-main)';
                    moralStatus.style.display = 'block';
                    moralStatus.innerText = 'Missing';

                    statStep.innerHTML = '2 / 4 <span style="background: #fef3c7; color: #d97706; padding: 3px 8px; border-radius: 20px;">Action Req.</span>';
                    statExam.innerHTML = 'On Hold <span style="background: #fef2f2; color: #dc2626; padding: 3px 8px; border-radius: 20px;">Missing Docs</span>';
                }
            }
        }

        function activateStudentAccount() {
            localStorage.setItem('userRole', 'student');
            window.location.reload();
        }

        function saveState() {
            localStorage.setItem('saap_tasks', document.getElementById('task-list-container').innerHTML);
            localStorage.setItem('saap_reviewers', document.getElementById('reviewer-list-container').innerHTML);
            const scheduleData = {};
            ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'].forEach(day => {
                scheduleData[day] = document.getElementById('tbody-' + day).innerHTML;
            });
            localStorage.setItem('saap_schedule', JSON.stringify(scheduleData));
        }

        function resetDemoData() {
            if(confirm("Are you sure you want to wipe all edited demo data? This cannot be undone.")) {
                localStorage.clear();
                location.reload();
            }
        }

        function switchView(viewName, element) {
            document.querySelectorAll('.sidebar-menu li').forEach(li => li.classList.remove('active'));
            element.classList.add('active');

            const role = localStorage.getItem('userRole') || 'student';
            const allCards = document.querySelectorAll('.filterable-card');
            const grid = document.getElementById('main-grid');
            
            if(viewName === 'all') {
                document.getElementById('welcome-banner').style.display = 'flex';
                document.getElementById('top-nav-title').innerText = 'Dashboard Overview';
                grid.style.display = 'grid';
                
                if(role === 'student') document.getElementById('quick-stats-student').style.display = 'grid';
                
                allCards.forEach(card => {
                    if(role === 'student' && !card.classList.contains('applicant-only')) card.style.display = 'block';
                });
            } else {
                document.getElementById('welcome-banner').style.display = 'none';
                document.getElementById('quick-stats-student').style.display = 'none';
                document.getElementById('quick-stats-applicant').style.display = 'none';
                grid.style.display = 'flex'; 
                grid.style.flexDirection = 'column';
                
                if(viewName === 'schedule-card') document.getElementById('top-nav-title').innerText = 'My Schedule';
                if(viewName === 'requests-card') document.getElementById('top-nav-title').innerText = 'Service Requests';
                if(viewName === 'academics-card') document.getElementById('top-nav-title').innerText = 'Academics & Tasks';
                if(viewName === 'admission-card') {
                    document.getElementById('top-nav-title').innerText = 'Admission Status';
                    document.getElementById('quick-stats-applicant').style.display = 'grid';
                }

                allCards.forEach(card => {
                    if(card.dataset.view === viewName || card.dataset.view.includes(viewName)) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });

                // RUN TRACKER CHECK WHEN OPENING ADMISSION CARD
                if(viewName === 'admission-card') checkApplicantStatus();
            }
        }

        function toggleProfileMenu() { document.getElementById('profileDropdown').classList.toggle('active'); }
        window.onclick = function(event) { if (!event.target.closest('.profile-container')) { Array.from(document.getElementsByClassName("dropdown-menu")).forEach(m => m.classList.remove('active')); } }
        function closeModals() {
            document.getElementById('class-modal').classList.remove('active');
            document.getElementById('task-modal').classList.remove('active');
            setTimeout(() => { document.getElementById('class-modal').style.display = 'none'; document.getElementById('task-modal').style.display = 'none'; }, 300);
        }

        function switchDay() {
            const selectedDay = document.getElementById('day-selector').value;
            document.querySelectorAll('.day-tbody').forEach(tbody => {
                tbody.style.display = 'none';
                tbody.classList.remove('active-tbody');
            });
            const activeTbody = document.getElementById('tbody-' + selectedDay);
            activeTbody.style.display = 'table-row-group';
            activeTbody.classList.add('active-tbody');
        }

        let rowToEdit = null;
        function openClassModal(editBtn = null) {
            const modal = document.getElementById('class-modal');
            modal.style.display = 'flex';
            setTimeout(() => { modal.classList.add('active'); }, 10);
            
            if (editBtn) {
                document.getElementById('class-modal-title').innerHTML = '<i class="fa-solid fa-pen"></i> Edit Class Details';
                rowToEdit = editBtn.closest('tr');
                document.getElementById('class-subject').value = rowToEdit.querySelector('.col-subject').innerText;
                document.getElementById('class-time').value = rowToEdit.querySelector('.col-time').innerText;
                document.getElementById('class-instructor').value = rowToEdit.querySelector('.col-instructor').innerText.trim();
                document.getElementById('class-room').value = rowToEdit.querySelector('.col-room').innerText;
            } else {
                document.getElementById('class-modal-title').innerHTML = '<i class="fa-solid fa-calendar-plus"></i> Add New Class';
                rowToEdit = null;
                document.getElementById('class-subject').value = '';
                document.getElementById('class-time').value = '';
                document.getElementById('class-instructor').value = '';
                document.getElementById('class-room').value = '';
            }
        }

        function saveClass(event) {
            event.preventDefault();
            let subject = document.getElementById('class-subject').value;
            let time = document.getElementById('class-time').value;
            let instructor = document.getElementById('class-instructor').value;
            let room = document.getElementById('class-room').value;

            if (rowToEdit) {
                rowToEdit.querySelector('.col-subject').innerHTML = subject;
                rowToEdit.querySelector('.col-time').innerText = time;
                rowToEdit.querySelector('.col-instructor').innerHTML = `<i class="fa-solid fa-chalkboard-user"></i> ${instructor}`;
                rowToEdit.querySelector('.col-room').innerText = room;
            } else {
                let tbody = document.querySelector('.active-tbody');
                if(tbody.querySelector('.empty-state')) { tbody.innerHTML = ''; }
                let newRow = `
                    <tr style="animation: pageFadeIn 0.3s ease-out;">
                        <td class="col-time time-text">${time}</td>
                        <td>
                            <div class="col-subject subject-text">${subject}</div>
                            <div class="col-instructor" style="font-size: 0.85rem; color: #6b7280; margin-top: 4px;"><i class="fa-solid fa-chalkboard-user"></i> ${instructor}</div>
                        </td>
                        <td><span class="room-badge col-room">${room}</span></td>
                        <td>
                            <div class="row-actions">
                                <i class="fa-solid fa-pen edit-icon" onclick="openClassModal(this)" title="Edit"></i>
                                <i class="fa-solid fa-trash delete-icon" onclick="deleteClass(this)" title="Delete"></i>
                            </div>
                        </td>
                    </tr>`;
                tbody.insertAdjacentHTML('beforeend', newRow);
            }
            saveState(); 
            closeModals();
        }

        function deleteClass(deleteBtn) {
            if(confirm("Are you sure you want to drop this subject?")) {
                let row = deleteBtn.closest('tr');
                row.style.transform = 'scale(0.9)';
                row.style.opacity = '0';
                setTimeout(() => { row.remove(); saveState(); }, 300);
            }
        }

        function toggleTask(checkboxElement) {
            checkboxElement.classList.toggle('checked');
            checkboxElement.closest('.task-item').classList.toggle('completed-task'); 
            saveState();
        }

        function openTaskModal() {
            const modal = document.getElementById('task-modal');
            modal.style.display = 'flex';
            setTimeout(() => { modal.classList.add('active'); }, 10);
            document.getElementById('task-title').value = '';
            document.getElementById('task-subject').value = '';
            document.getElementById('task-deadline').value = '';
        }

        function saveTask(event) {
            event.preventDefault();
            let title = document.getElementById('task-title').value;
            let subject = document.getElementById('task-subject').value;
            let deadline = document.getElementById('task-deadline').value;

            let listContainer = document.getElementById('task-list-container');
            let newTaskHTML = `
                <div class="task-item" style="animation: pageFadeIn 0.4s ease-out;">
                    <div class="task-left">
                        <div class="task-checkbox" onclick="toggleTask(this)"><i class="fa-solid fa-check"></i></div>
                        <div class="task-details"><h4>${title}</h4><p>${subject}</p></div>
                    </div>
                    <div class="task-due" style="background: #eef5f6; color: var(--primary);">${deadline}</div>
                    <div class="task-delete" onclick="deleteTaskItem(this)"><i class="fa-solid fa-trash"></i></div>
                </div>`;
            listContainer.insertAdjacentHTML('afterbegin', newTaskHTML);
            saveState();
            closeModals();
        }

        function deleteTaskItem(btn) {
            let item = btn.parentElement;
            item.style.transform = 'translateX(50px)';
            item.style.opacity = '0';
            setTimeout(() => { item.remove(); saveState(); }, 300);
        }

        function uploadReviewer(event) {
            let file = event.target.files[0];
            if(file) {
                let listContainer = document.getElementById('reviewer-list-container');
                let newFileHTML = `
                    <div class="reviewer-item" style="background: #f0fdf4; border-color: #10b981; animation: pageFadeIn 0.4s ease-out;">
                        <i class="fa-solid fa-file-circle-check" style="color: #10b981; font-size: 2rem;"></i>
                        <div class="reviewer-info"><h4>${file.name}</h4><p style="color: #047857; font-weight: 600;">Uploaded successfully!</p></div>
                        <i class="fa-solid fa-trash reviewer-action" title="Delete" onclick="deleteReviewerItem(this)"></i>
                    </div>`;
                listContainer.insertAdjacentHTML('afterbegin', newFileHTML);
                saveState();
                event.target.value = '';
            }
        }

        function deleteReviewerItem(btn) {
            let item = btn.parentElement;
            item.style.transform = 'scale(0.9)';
            item.style.opacity = '0';
            setTimeout(() => { item.remove(); saveState(); }, 300);
        }
    </script>
</body>
</html>
